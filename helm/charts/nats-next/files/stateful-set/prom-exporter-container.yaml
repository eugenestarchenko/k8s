name: prom-exporter
image: {{ include "nats.image" .Values.containers.promExporter.image }}
imagePullPolicy: {{ .Values.containers.promExporter.image.pullPolicy }}

ports:
- name: prom-metrics
  containerPort: {{ .Values.containers.promExporter.port }}

{{- with .Values.containers.promExporter.env }}
env:
{{- include "nats.env" . }}
{{- end }}

args:
- -connz
- -routez
- -subz
- -varz
- -prefix=nats
- -use_internal_server_id
{{- if .Values.config.jetstream.enabled }}
- -jsz=all
{{- end }}
{{- if .Values.config.leafnodes.enabled }}
- -leafz
{{- end }}
{{- if .Values.config.gateway.enabled }}
- -gatewayz
{{- end }}
- http://localhost:{{ .Values.config.monitor.port }}/
